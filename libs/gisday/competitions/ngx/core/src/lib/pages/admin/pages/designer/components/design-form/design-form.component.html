<form (submit)="getSchema()" [formGroup]="loadSchemaForm">
  <p class="trailer-1">Enter a URL source that points to a live ESRI REST service layer endpoint to retrieve the configuration and auto-generate a form from its attributes.</p>
  <div class="row">
    <tamu-gisc-textbox class="fb-2 form-element" type="text" placeholder="Service Layer URL" [floatLabel]="true" formControlName="source"></tamu-gisc-textbox>

    <tamu-gisc-button class="fb-1 form-element leader-2" value="Fetch Schema" type="submit"></tamu-gisc-button>
  </div>
</form>

<ng-container *ngIf="formModel !== undefined">
  <form [formGroup]="formModel" (submit)="saveForm()">
    <div class="form-section">
      <div class="form-section-toolbar">
        <div class="form-section-title">Basic</div>
      </div>

      <div class="form-section-body">
        <div class="form-collection row pad-top">
          <tamu-gisc-checkbox formControlName="allowSubmissions" label="Allow Submissions"></tamu-gisc-checkbox>
        </div>
      </div>
    </div>

    <div class="form-section leader-1">
      <div class="form-section-toolbar">
        <div class="form-section-title">Questions</div>
      </div>

      <div class="form-section-body">
        <div class="form-collection row pad-top" *ngFor="let c of formModel.controls['fields']['controls']">
          <tamu-gisc-design-question [control]="c"></tamu-gisc-design-question>
        </div>
      </div>
    </div>

    <tamu-gisc-button type="submit" [value]="'Save'"></tamu-gisc-button>
  </form>
</ng-container>
