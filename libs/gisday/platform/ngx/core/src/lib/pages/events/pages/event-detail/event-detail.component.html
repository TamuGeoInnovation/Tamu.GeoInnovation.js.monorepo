<section *ngIf="($event | async) as event">
  <div>
    <div class="container12 leader-3 flex flex-row">
      <h1 class="session-title">{{event.name}}</h1>
      <div id="qr-toggle" *ngIf="event" class="popup" href="" magnific-popup>
        <i class="fa fa-qrcode fa-3x"></i>
        <span>Checkin QR</span>
      </div>
    </div>
    <div class="container12" *ngIf="event">
      <div class="column10">
        <div id="timeAndPlace" class="trailer-1">
          <ng-container *ngIf="event?.day?.date; else noTime">
            <p>{{event?.day?.date| parseDateTimeStrings : event.startTime | date:'MMM d, y, h:mm a'}} - {{ event?.day?.date| parseDateTimeStrings : event.endTime | date:'h:mm a'}} <span *ngIf="event?.mode" class="event-type"> - {{event.mode}}</span></p>
          </ng-container>

          <ng-template #noTime>Time TBD</ng-template>

          <ng-container *ngIf="event?.location?.link; else noLocation">
            <p>
              <a href="{{event.location?.link}}" target="_blank">{{event.location?.building}} {{event.location?.room}}</a>
            </p>
          </ng-container>

          <ng-template #noLocation>
            <p>Location TBD</p>
          </ng-template>
        </div>

        <div class="trailer-2">
          <tamu-gisc-accordion>
            <tamu-gisc-accordion-header><b>Online Zoom Meeting Info</b></tamu-gisc-accordion-header>
            <tamu-gisc-accordion-content>
              <p>Some resources will only be available at the start of the session.</p>

              <ul>
                <li>The online Zoom broadcast for this session has not been setup yet.</li>
              </ul>
            </tamu-gisc-accordion-content>
          </tamu-gisc-accordion>

          <tamu-gisc-accordion>
            <tamu-gisc-accordion-header
              ><b>Learning Resources <span *ngIf="!event?.resources">(None)</span></b></tamu-gisc-accordion-header
            >
            <tamu-gisc-accordion-content>
              <p>Some resources will only be available at the start of the session</p>

              <ul>
                <li>There are no materials for this session.</li>
                <li>There is no online broadcast for this session.</li>
              </ul>
            </tamu-gisc-accordion-content>
          </tamu-gisc-accordion>

          <tamu-gisc-accordion>
            <tamu-gisc-accordion-header
              ><b>Session Requirements <span *ngIf="!event?.requirements">(None)</span></b></tamu-gisc-accordion-header
            >
            <tamu-gisc-accordion-content>
              <ng-container *ngIf="event?.requirements && event.requirements.length > 0; else noRequirements"> {{event.requirements}} </ng-container>

              <ng-template #noRequirements>
                <p>session has no special requirements.</p>
              </ng-template>
            </tamu-gisc-accordion-content>
          </tamu-gisc-accordion>
        </div>

        <div class="trailer-1 felx flex-row">
          <h3 class="trailer-1">Session Description</h3>

          <div class="trailer-2 session-description" *ngIf="event?.abstract && event.abstract.length > 0" [innerHTML]="event.abstract | markdownParse"></div>
        </div>

        <div class="trailer-1 flex flex-row half-children">
          <div>
            <h3>Registration</h3>
            <p *ngIf="event.requiresRsvp === true || event.requiresRsvp === null">This is a limited-seating event. Register to reserve your seat.</p>
            <p *ngIf="event.isAcceptingRsvps === undefined || event.isAcceptingRsvps === false">Registration for this event is not open yet.</p>

            <!-- <tamu-gisc-button *ngIf="event.isAcceptingRsvps === undefined || event.isAcceptingRsvps === false" [look]="'secondary'" [disabled]="true" value="REGISTRATION NOT YET AVAILABLE"></tamu-gisc-button> -->
          </div>

          <div>
            <h3>Checkin</h3>
            <div *ngIf="isCheckinOpen === false; else showCheckinButton">
              <p>Checkin will be available at the start of the session.</p>
            </div>

            <ng-template #showCheckinButton>
              <div>
                <p>Use the button below to checkin into this event.</p>
                <!-- <tamu-gisc-button fit="snug" value="CheckIn" (click)="checkin()"></tamu-gisc-button> -->
              </div>
            </ng-template>
          </div>
        </div>

        <div class="trailer-2 ng-scope" *ngIf="event.speakers.length > 0">
          <div class="border-divider leader-2 trailer-2"></div>
          <h3>Presenters</h3>
          <div class="flex flex-row leader-1 justify-between">
            <div class="presenter-item" *ngFor="let presenter of (event.speakers)">
              <div class="image" *ngIf="presenter.speakerInfo; else default" presenter="presenter" [ngStyle]=" { 'background-image': 'url('+unwrapPhoto(presenter.speakerInfo?.blob?.data)+')'  } "></div>

              <ng-template #default>
                <div class="image default">
                  <svg style="width: 24px; height: 24px" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />
                  </svg>
                </div>
              </ng-template>

              <div class="details">
                <div class="name">
                  <a *ngIf="presenter" href="/presenters/details/{{presenter.guid}}"> {{presenter.firstName}} {{presenter.lastName}} </a>
                </div>
                <div class="organization">{{presenter.organization}}</div>
                <div class="role">{{presenter?.role}}</div>
              </div>
            </div>
          </div>
        </div>

        <div>
          <div class="border-divider leader-2 trailer-2"></div>
          <div class="trailer-2">
            <h3 class="trailer-1">Rate This Session</h3>
            <div>
              <p>This event is currently not underway. The session ratings survey will become available when it begins.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
