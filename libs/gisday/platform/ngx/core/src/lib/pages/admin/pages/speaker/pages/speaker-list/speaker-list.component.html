<div class="form">
  <div class="form-section">
    <div class="form-section-toolbar">
      <div class="form-section-name">Speakers</div>
      <div class="form-section-actions">
        <tamu-gisc-select class="post-1" placeholder="Season" [floatLabel]="false" [data]="seasons$ | async" displayTemplate="year" valueTemplate="guid" [value]="(selectedSeason$ | async)?.guid" (changed)="setSeason($event)"></tamu-gisc-select>

        <a routerLink="add">Add speaker <span class="material-icons action">add</span></a>
      </div>
    </div>

    <div class="form-section-body">
      <ng-container *ngIf="entitiesForActiveSeasonOrForSeasonGuid$ | async as entities">
        <table class="floating-table" *ngIf="entities?.length > 0; else noSpeakers">
          <thead>
            <tr>
              <th><tamu-gisc-checkbox label="" (changed)="toggleAllRows(entities)" [checked]="(selectedRows$ | async)?.length === entities.length "></tamu-gisc-checkbox></th>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Email</th>
              <th>Affiliation</th>
              <th>Updated</th>
            </tr>
          </thead>

          <tbody>
            <tr class="selectable" [routerLink]="['edit', entity.guid]" *ngFor="let entity of entities">
              <td (click)="$event.stopPropagation()"><tamu-gisc-checkbox label="" (changed)="toggleRow(entity?.guid)" [checked]="(selectedRows$ | async) | exists: entity?.guid"></tamu-gisc-checkbox></td>
              <td>{{entity.firstName}}</td>
              <td>{{entity.lastName}}</td>
              <td>{{entity.email}}</td>
              <td>{{entity?.organization?.name}}</td>
              <td>{{entity.updated | date:'short'}}</td>
            </tr>
          </tbody>
        </table>

        <div class="selected-action-container info-block context" *ngIf="(selectedRows$ | async)?.length > 0">
          <div>
            <p><strong>{{(selectedRows$ | async).length}} selected</strong></p>
          </div>

          <div class="selected-actions">
            <p class="selected-action" (click)="promptCopyModal('Speaker')">Copy <span class="material-icons action">content_copy</span></p>
            <p class="selected-action caution" (click)="promptDeleteModal('Speaker')">Delete <span class="material-icons action">delete_forever</span></p>
          </div>
        </div>
      </ng-container>

      <ng-template #noSpeakers>
        <p>There are no speakers for the selected season.</p>
      </ng-template>
    </div>
  </div>
</div>

<table></table>
