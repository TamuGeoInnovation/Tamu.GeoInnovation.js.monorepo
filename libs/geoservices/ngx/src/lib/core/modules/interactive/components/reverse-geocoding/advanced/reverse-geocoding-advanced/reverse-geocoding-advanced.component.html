<div [@inOutAnimation]>
  <form [formGroup]="form" (submit)="processInteractiveQuery()">
    <div class="form-section">
      <div class="form-section-toolbar">
        <div class="form-section-name">
          <p>Geographic Point</p>
        </div>
      </div>

      <div class="form-section-body">
        <div class="form-collection row">
          <tamu-gisc-textbox type="number" [floatLabel]="true" placeholder="Longitude (e.g. -118.397965182076)" formControlName="lon"></tamu-gisc-textbox>
        </div>

        <div class="form-collection row">
          <tamu-gisc-textbox type="number" [floatLabel]="true" placeholder="Latitude (e.g. 34.0726207994348)" formControlName="lat"></tamu-gisc-textbox>
        </div>

        <div class="form-collection row">
          <tamu-gisc-select placeholder="State (Optional)" [data]="states" displayTemplate="name" valueTemplate="abbreviation" formControlName="state"></tamu-gisc-select>
        </div>

        <div class="form-collection row">
          <tamu-gisc-button [value]="buttonLanguage | async" [disabled]="form.invalid || (processing | async) === true" [type]="'submit'"></tamu-gisc-button>
        </div>
      </div>
    </div>
  </form>
</div>

<ng-container *ngIf="result | async as res">
  <div [@inOutAnimation] class="leader-3">
    <h2 class="section-header">Results</h2>

    <tamu-gisc-accordion [expanded]="true">
      <tamu-gisc-accordion-header>Transaction Details</tamu-gisc-accordion-header>
      <tamu-gisc-accordion-content>
        <tamu-gisc-status-result-table [status]="res.data"></tamu-gisc-status-result-table>
      </tamu-gisc-accordion-content>
    </tamu-gisc-accordion>

    <tamu-gisc-accordion [expanded]="true">
      <tamu-gisc-accordion-header>Result</tamu-gisc-accordion-header>
      <tamu-gisc-accordion-content>
        <table>
          <tbody>
            <tr>
              <td>
                <strong>Status</strong>
              </td>
              <td>{{res?.message}}</td>
            </tr>

            <tr>
              <td>
                <strong>Time Taken</strong>
              </td>
              <td>{{res?.data?.timeTaken | number}} ms</td>
            </tr>

            <tr>
              <td>
                <strong>Transaction Guid</strong>
              </td>
              <td>{{res?.data?.transactionGuid}}</td>
            </tr>

            <tr>
              <td>
                <strong>APN</strong>
              </td>
              <td>{{res?.data?.results?.[0].apn}}</td>
            </tr>

            <tr>
              <td>
                <strong>Address</strong>
              </td>
              <td>{{res?.data?.results?.[0].streetAddress}}</td>
            </tr>

            <tr>
              <td>
                <strong>City</strong>
              </td>
              <td>{{res?.data?.results?.[0].city}}</td>
            </tr>

            <tr>
              <td>
                <strong>State</strong>
              </td>
              <td>{{res?.data?.results?.[0].state}}</td>
            </tr>

            <tr>
              <td>
                <strong>Zip</strong>
              </td>
              <td>{{res?.data?.results?.[0].zip}}</td>
            </tr>

            <tr>
              <td>
                <strong>Zip+4</strong>
              </td>
              <td>{{res?.data?.results?.[0].zipPlus4}}</td>
            </tr>
          </tbody>
        </table>
      </tamu-gisc-accordion-content>
    </tamu-gisc-accordion>
  </div>
</ng-container>
