<div class="card">
  <ng-container *ngIf="(result | async) === null; else resultContainer">
    <div [@inOutAnimation]>
      <div class="animating-container">
        <form [formGroup]="form" (submit)="processInteractiveQuery()">
          <div class="form-section">
            <div class="form-section-toolbar">
              <div class="form-section-name">Interactive Address Processing</div>
            </div>

            <div class="form-section-body">
              <div class="form-collection row">
                <tamu-gisc-textbox [type]="'text'" [floatLabel]="true" [placeholder]="'Street Address (e.g 123 main street)'" formControlName="address"></tamu-gisc-textbox>
              </div>

              <div class="form-collection row">
                <tamu-gisc-select [placeholder]="'Address Format'" [data]="formats" [displayTemplate]="'name'" [valueTemplate]="'value'" formControlName="addressFormat"></tamu-gisc-select>
              </div>

              <div class="form-collection row">
                <tamu-gisc-button [value]="buttonLanguage | async" [disabled]="form.invalid || (processing | async) === true" [type]="'submit'"></tamu-gisc-button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </ng-container>

  <ng-template #resultContainer>
    <div *ngIf="result | async as res" [@inOutAnimation]>
      <div class="animating-container">
        <tamu-gisc-tabs>
          <tamu-gisc-tab *ngFor="let cr of (result | async)?.data?.results" [label]="'Result'">
            <table>
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Value</th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>Number</td>
                  <td>{{cr?.parsedAddress?.number}}</td>
                </tr>

                <tr>
                  <td>Number Fractional</td>
                  <td>{{cr?.parsedAddress?.numberFractional}}</td>
                </tr>

                <tr>
                  <td>Pre-Directional</td>
                  <td>{{cr?.parsedAddress?.preDirectional}}</td>
                </tr>

                <tr>
                  <td>Pre-Qualifier</td>
                  <td>{{cr?.parsedAddress?.preQualifier}}</td>
                </tr>

                <tr>
                  <td>Pre-Type</td>
                  <td>{{cr?.parsedAddress?.preType}}</td>
                </tr>

                <tr>
                  <td>Pre-Article</td>
                  <td>{{cr?.parsedAddress?.preArticle}}</td>
                </tr>

                <tr>
                  <td>Name</td>
                  <td>{{cr?.parsedAddress?.name}}</td>
                </tr>

                <tr>
                  <td>Post-Article</td>
                  <td>{{cr?.parsedAddress?.postArticle}}</td>
                </tr>

                <tr>
                  <td>Suffix</td>
                  <td>{{cr?.parsedAddress?.suffix}}</td>
                </tr>

                <tr>
                  <td>Post-Qualifier</td>
                  <td>{{cr?.parsedAddress?.postQualifier}}</td>
                </tr>

                <tr>
                  <td>Post Directional</td>
                  <td>{{cr?.parsedAddress?.postDirectional}}</td>
                </tr>

                <tr>
                  <td>Suite Type</td>
                  <td>{{cr?.parsedAddress?.suiteType}}</td>
                </tr>

                <tr>
                  <td>Suite Number</td>
                  <td>{{cr?.parsedAddress?.suiteNumber}}</td>
                </tr>
              </tbody>
            </table>
          </tamu-gisc-tab>
        </tamu-gisc-tabs>

        <div class="flex flex-row">
          <tamu-gisc-interactive-response-metadata [status]="res?.message" [guid]="res?.data?.transactionGuid" [timeTaken]="res?.data?.timeTaken" (resetTrigger)="clearResult()"></tamu-gisc-interactive-response-metadata>
        </div>
      </div>
    </div>
  </ng-template>
</div>
